import{v as x,u as g,m as k,a as m,j as a,e as R,w as f}from"./index-BbGA0quC.js";const B="_RedirBox_182ts_1",_="_RedirText_182ts_13",r={RedirBox:B,RedirText:_},b=()=>{const[o]=x(),c=g(),s=k();return m.useEffect(()=>{const t=o.get("token");(async()=>{t===null&&s("/login",{replace:!0});try{const e=await R.get("https://kapusta-backend-827563b0830f.herokuapp.com/api/auth/current",{headers:{Authorization:`Bearer ${t}`}});if(e.status===200){const n=e.data.user,{name:i,email:u,balance:d,avatarUrl:l}=n,p=!0,h=e.data.token;c(f({isLoggedIn:p,name:i,email:u,balance:d,avatarUrl:l,token:h})),s("/",{replace:!0})}else s("/login",{replace:!0})}catch(e){console.error("Błąd:",e),s("/login",{replace:!0})}})()},[]),a.jsx("div",{className:r.RedirBox,children:a.jsx("b",{className:r.RedirText,children:"Redirecting..."})})};export{b as default};
