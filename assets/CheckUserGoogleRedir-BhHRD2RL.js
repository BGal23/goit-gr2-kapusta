import{a,w as g,u as R,n as m,j as r,e as f,x as B}from"./index-DMmAlYti.js";const _="_RedirBox_182ts_1",T="_RedirText_182ts_13",o={RedirBox:_,RedirText:T},j=()=>{const[s,c]=a.useState(""),[n]=g(),i=R(),t=m();return a.useEffect(()=>{c(n.get("token")),(async()=>{s===null&&t("/login",{replace:!0});try{const e=await f.get("https://kapusta-backend-827563b0830f.herokuapp.com/api/auth/current",{headers:{Authorization:`Bearer ${s}`}});if(e.status===200){const u=e.data.user,{name:d,email:l,balance:p,avatarUrl:x}=u,h=!0,k=e.data.token;i(B({isLoggedIn:h,name:d,email:l,balance:p,avatarUrl:x,token:k})),t("/",{replace:!0})}else t("/login",{replace:!0})}catch(e){console.error("Błąd:",e),t("/login",{replace:!0})}})()},[s]),r.jsx("div",{className:o.RedirBox,children:r.jsx("b",{className:o.RedirText,children:"Redirecting..."})})};export{j as default};
